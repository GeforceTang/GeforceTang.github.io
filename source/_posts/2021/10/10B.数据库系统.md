---
title: 数据库系统
date: 2021-10-13 20:50:25
categories: 架构软考
tags: 架构设计
---


# 知识点
## 知识体系
![知识体系](/images/系统架构师/数据库系统-知识体系.png)

<!--more-->
## 三级模式-两层映射
![三级模式](/images/系统架构师/数据库系统-三级模式.png)
三级模式
1. 内模式：对应物理级别数据库（物理文件）
2. 概念模式：对应数据表结构
3. 外模式：对应视图
两层映射
1. 第一层映射的作用（外模式）：数据库表发生变化应用程序不变（通过视图可以解决表变化后应用程序需要变化的问题）。
2. 第二次映射的作用（内模式）：文件存储发生变化不影响应用程序。
### 视图
![视图](/images/系统架构师/数据库系统-三级模式视图.png)
物化视图：能提高查询性能，但是更新原始表效率会降低。

## 数据库设计过程
![设计过程](/images/系统架构师/数据库系统-设计过程.png)
和软件工程中的冲突：软件工程ER模式是在需求分析阶段的数据建模工具，而数据库设计过程ER模式是在概念结构设计的产物。
需求分析主要产物：数据流图（DFD）、数据字典（DD）、需求说明书

### ER模式
用途：梳理清楚有哪些数据，以及数据之间的关联关系。
![ER模型](/images/系统架构师/数据库系统-设计过程ER模型.png)
![ER模型2](/images/系统架构师/数据库系统-设计过程ER模型2.png)
1. 数据抽象：识别出对象以及其属性（比如说学生）。
2. 局部和合并：逐步设计ER模型，最终合并起来。
3. 重构优化：最新成形ER模型。

#### 转换关系模式
![ER模型3](/images/系统架构师/数据库系统-设计过程ER模型3.png)
无论哪一种都是转换成单独的对应模式。
1. 一对一转换模式：每个实体单独转换成一个关键模式，每个属性对应一个字段。 -> 学生（学号，姓名，性别，年龄）
2. 一对多转换模式：可以单独转换关系模式，也可以连续与N端联系。
3. 多对多转换模式：必须单独转换关系模式

三个以上的实体间转换，多了一个联系。

## 关系代数
![关系代数](/images/系统架构师/数据库系统-关系代数.png)
1. 并集：将S1和S2合并起来，去掉重复记录
2. 交集：S1和S2的公共部分的记录
3. 差集：在S1中但不在S2中的记录
4. 笛卡尔积：S1的记录*S2的记录，逐条连接
5. 投影：获取记录的指定字段（列）
6. 选择：获取满足条件的记录（行）
7. 联接：S1与S2的Join操作，连接的本质是对数据做选择、投影、笛卡尔积。

### 自然连接
对S1与S2中相同的属性做等值连接，去掉重复属性。
![自然连接](/images/系统架构师/数据库系统-关系代数自然连接.png)
比如要筛选Age<22的数据，可以先对S2做选择后，再和S1做笛卡尔积，之后再做投影。

## 规范化理论
用途：在ER模型转换成关系模式之后发现存在的问题，其对应的规范化处理方法。
![规范化理论](/images/系统架构师/数据库系统-规范化理论.png)

### 函数依赖
![函数依赖](/images/系统架构师/数据库系统-规范化理论函数依赖.png)
概念是这样的：比如函数标识 y=x² ，当y=1时x=[-1,1]，存在不确定性。
同理到数据库中，比如身份证可以确定姓名，但不能通过姓名来确定身份证。
1. 部分函数依赖：AB -> D组合主键情况下 A ->C ，由主键部分可以确定依赖。
2. 传递函数依赖：A -> B, B -> C = A -> C
### 键
![键](/images/系统架构师/数据库系统-规范化理论键.png)
1. 候选键：唯一标记的列
2. 主键：在候选键中选择
3. 外键：连接使用

#### 求候选键
![求候选键](/images/系统架构师/数据库系统-规范化理论候选键.png)

### 范式
![范式](/images/系统架构师/数据库系统-规范化理论范式.png)

#### 第一范式
![第一范式](/images/系统架构师/数据库系统-规范化理论第一范式.png)
1. 简单属性：不可拆分
2. 复合属性：可以再拆分
3. 多指属性：对应多个值，一个字段里面存储了多个数据。（较好的处理方案是新增一个实体）
4. 派生属性：派生出来的数据，可以理解为冗余（比如出生年和年龄）

#### 第二范式
![第二范式](/images/系统架构师/数据库系统-规范化理论第二范式.png)
主属性：被包含于任意一个候选键的属性。

#### 第三范式
![第三范式](/images/系统架构师/数据库系统-规范化理论第三范式.png)

# 综合实战
## 讲义题目
### 题目（1）
• SQL语言支持关系数据库的三级模式结构图如下所示，图中视图、基本表、存储文件分别对应（ 1 ）。
![第1题](/images/系统架构师/数据库系统-第1题.png)
A. 模式、内模式、外模式
B. 外模式、模式、内模式
C. 模式、外模式、内模式
D. 外模式、内模式、模式

### 题目（2）
• 在数据库设计的需求分析阶段应完成包括（ 2 ）在内的文挡。
A. E-R图 
B. 关系模式
C. 数据字典和数据流图 
D. 任务书和设计方案

### 题目（3）
• 设有职务工资关系 （职务，最低工资，最高工资），员工关系 EMP （员工号，职务，工资），要求任何一名员工，其工资值必须在其职务对应的工资范围之内，实现该需求的方法是（ 3 ）。
A. 建立“EMP.职务”向“P.职务”的参照完整性约束
B. 建立“P.职务”向“EMP.职务”的参照完整性约束
C. 建立EMP上的触发器程序审定该需求
D. 建立P上的触发器程序审定该需求

### 题目（4）（5）
 • 某数据库中有员工关系 E（员工号，姓名，部门，职称，月薪）；产品关系 P（产品号，产品名称，型号，尺寸，颜色）；仓库关系 W（仓库号，仓库名称，地址，负责人）；库存关系 I（仓库号，产品号，产品数量）。若数据库设计中要求：
    ①仓库关系W中的“负责人”引用员工关系的员工号
    ②库存关系I中的“仓库号，产品号”惟一标识 中的每一个记录
    ③员工关系E中的职称为“工程师”的月薪不能低于 3500 元
    则①②③依次要满足的完整性约束是（ 4 ）。
(4) 
A. 实体完整性、参照完整性、用户定义完整性
B. 参照完整性、实体完整性、用户定义完整性
C. 用户定义完整性、实体完整性、参照完整性
D. 实体完整性、用户定义完整性、参照完整性
<br/>若需得到每种产品的名称和该产品的总库存量，则对应的查询语句为：`SELECT 产品名称,SUM(产品数量) FROM P,I WHERE P.产品号＝ I.产品号 （ 5 ）; `
(5) A. ORDERBY 产品名称     B. ORDERBY 产品数量     C. GROUPBY 产品名称     D. GROUPBY 产品数量

### 题目（6）
• 给定学生（学号，姓名，年龄，入学时间，联系方式）和选课 SC 学号，课程号，成绩）关系，若要查询选修了 1 号课程的学生学号、姓名和成绩，则该查询与关系代数表达式（ 6 ）等价。
![第6题](/images/系统架构师/数据库系统-第6题.png)

### 题目（7）（8）
• 在数据库设计的需求分析阶段应当形成（ 7 ），这些文档可以作为（ 8 ）阶段的设计依据。
(7) 
A. 需求说明文档、数据字典和数据流图
B. 需求说明文档、程序文档和数据流图
C. 程序文档、数据字典和数据流图
D. 需求说明文档、数据字典和程序文档
(8) A. 逻辑结构设计     B. 物理结构设计     C. 概念结构设计     D. 数据库运行和维护

### 题目（9）
• 若要使某用户只能查询表 EMP 中的部分记录，应采取的策略是（ 9 ）。
A. 将该用户级别设定为 DBA
B. 将表 EMP 的查询权限赋予该用户
C. 编写查询表 EMP 的存储过程
D. 构建该部分记录的行级视图，并将该视图的查询权限赋予该用户

### 题目（10）（11）
• 假设关系模式 R(U, F)，属性集 U={A, B, C)，函数依赖集 F={A->B, B->C)。若将其分解为 p={R1(U1, F1), R2(U2, F2))，其中 U1 ={A, B) , U2={A, C}。那么，关系模式R、R1、R2分别达到了（ 10 ）；分解p( 11 ）。
(10) A. 1NF 2NF 3NF     B. 1NF 3NF 3NF      C. 2NF 2NF 3NF      D. 2NF 3NF 3NF
(11) 
A. 有损连接但保持函数依赖
B. 既无损连接又保持函数依赖
C. 有损连接且不保持函数依赖
D. 无损连接但不保持函数依赖

### 题目（12）
• 在数据库系统中，数据的完整性是指数据的 （ 12 ）。
A. 有效性、正确性和一致性 
B. 有效性、正确性和可维护性
C. 有效性、正确性和安全性 
D. 正确性、一致性和安全性

### 题目（13）（14）（15）（16）
• 某公司的商品（商品号，商品名称，生产商，单价）和仓库（仓库号，地址，电话，商品号，库存量）两个实体之间的关系如表1和表2所示。
![第13题](/images/系统架构师/数据库系统-第13题.png)
![第14题](/images/系统架构师/数据库系统-第14题.png)
商品关系的主键是（ 13 ）；仓库关系的主键是（ 14 ）；仓库关系（ 15 ），为了解决这一问题，需要将仓库关系分解为（ 16 ）。
(13) A. 商品号      B. 商品名称     C. 生产商       D. 单价
(14) A. 仓库号,地址        B. 仓库号,电话     C. 仓库号,商品号       D. 地址,电话
(l5) 
A. 无冗余、无插入异常，但存在删除异常 
B. 无冗余，但存在插入异常和删除异常
C. 存在冗余，但不存在修改操作的不一致
D. 存在冗余、修改操作的不一致，以及插入异常和删除异常
(16) 
A. 仓库1（仓库号，地址）和仓库2（仓库号，电话，商品号，库存量）
B. 仓库1（仓库号，地址，电话）和仓库2（商品号，库存量）
C. 仓库1（仓库号，电话）和仓库2（仓库号，地址，商品号，库存量）
D. 仓库1（仓库号，地址，电话）和仓库2（仓库号，商品号，库存量）

### 题目（17）
• 数据仓库在收集数据过程中，会遇到一些略微不一致但可以纠正的数据，纠正的过程称为（ 17 ）。
A. 数据转换     B. 数据抽取     C. 数据清洗     D. 数据装载

### 题目（18）
• 在数据库设计的需求分析阶段，业务流程一般采用（ 18 ）表示。
A. 数据流图     B. E-R      C. 程序结构图       D. 功能模块图

### 题目（19）
• 以下关于 RDBMS 数据分布的叙述中，错误的是（ 19 ）。
A. 数据垂直分割是将不同表的数据存储到不同的服务器上
B. 数据水平分割是将不同行的数据存储到不同的服务器上
C. 数据复制是将数据的多个副本存储到不同的服务器上
D. 数据复制中由 RDBMS 维护数据的一致性

### 题目（20）（21）
• 企业战略数据模型可分为两种类型：（ 20 ）描述日常事务处理中的数据及其关系；（ 21 ）描述企业管理决策者所需信息及其关系。
(20) A. 元数据模型      B. 数据库模型       C. 数据仓库模型     D. 组织架构模型
(21) A. 元数据模型      B. 数据库模型       C. 数据仓库模型     D. 组织架构模型


## 参考答案
![参考答案](/images/系统架构师/数据库系统-参考答案.png)