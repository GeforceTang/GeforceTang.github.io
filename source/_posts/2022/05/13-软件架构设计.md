---
title: 软件架构设计
date: 2022-10-22 15:15:15
categories: 软考笔记
tags: 软考高级
---

## 知识点提要

> - 软件架构的概念(⭐⭐⭐)
> - 软件架构风格(⭐⭐⭐⭐⭐ )
> - 架构描述语言ADL (⭐⭐⭐)
> - 特定领域软件架构(⭐⭐⭐)
> - 基于架构的软件开发(⭐⭐⭐⭐)
> - 软件质量属性(⭐⭐⭐⭐⭐ )
> - 软件架构评估(⭐⭐⭐⭐⭐)
> - 软件产品线(⭐⭐⭐)
> - 构件与中间件技术(⭐⭐⭐⭐)
> - Web架构设计 (⭐⭐⭐⭐⭐)

## 软件架构

### 概念

> 软件架构（即软件体系结构） = 架构设计处于需求分析和软件设计的中间，为了解决需求分析和软件设计之间的鸿沟。
>
> 架构设计就是需求分配，即将满足需求的职责分配到组件上，架构说白了就是给定问题域的高维度解决方案。

- 软件架构风格是描述某一特定应用领域中系统组织方式的惯用模式。架构风格定义一个系统家族，即一个体系结构定义一个词汇表和组约束。词汇表中包含些构件和连接件类型，而这组约束指出系统是如何将这些构件和连接件组合起来的。
- 软件架构为软件系统提供了一个结构、行为和属性的高级抽象，由构成系统的元素的描述、这些元素的相互作用、指导元素集成的模式以及这些模式的约束组成。
- 软件架构是项目干系人进行交流的手段，明确了对系统实现的约束条件，决定了开发和维护组织的组织结构，制约着系统的质量属性。
- 软件架构使推理和控制的更改更加简单，有助于循序渐进的原型设计，可以作为培训的基础。
- 软件架构是可传递和可复用的模型，通过研究软件架构可能预测软件的质量。

#### 架构建模

结构模型：以架构的构件、连接件和其他概念来刻画结构

框架模型：不太侧重描述结构的细节而更侧重于整体的结构

动态模型：系统的"大颗粒”的行为性质

过程模型：构建系统的步骤和过程

功能模型：由一组功能构件按层次组成，下层向上层提供服务

#### 4+1视图

![image-20221022153744434](https://geforce-tang.oss-cn-shanghai.aliyuncs.com/imgs/image-20221022153744434.png)



## 架构风格

架构设计的一个核心问题是能否达到架构级的软件复用，架构风格反映了领域中众多系统所共有的结构和语义特性，并指导如何将各个构件有效地组织成一个完整的系统。

架构风格定义了用于描述系统的术语表和一组指导构建系统的规则。

| 五大架构风格  | 子风格                            |
| ------------- | --------------------------------- |
| 数据流风格    | 批处理、管道过滤器                |
| 调用/返回风格 | 主程序/子程序、面向对象、层次结构 |
| 独立构件风格  | 进程通信、事件驱动系统(隐式调用)  |
| 虚拟机风格    | 解释器、规则系统                  |
| 仓库风格      | 数据库系统、黑板系统、超文本系统  |

### 数据流风格

对数据进行处理，有一个相对固定的处理流程。**早期编译器就是采用的这种架构。要一步一步处理的，均可考虑采用此架构风格。**

- 批处理序列：构件为一系列固定顺序的计算单元，构件之间只通过数据传递交互。每个处理步骤是一个独立的程序，每一步必须在其前一步结束后才能开始，**数据必须是完整的,以整体的方式传递。**

- 管道-过滤器：每个构件都有一-组输入和输出，构件读输入的数据流，经过内部处理，然后产生输出数据流。这个过程通常是通过对输入数据流的变换或计算来完成的,包括通过计算和增加信息以丰富数据、通过浓缩和删除以精简数据、通过改变记录方式以转化数据和递增地转化数据等。这里的构件称为过滤器，连接件就是数据流传输的管道，将一个过滤器的输出传到另一个过滤器的输入。

### 调用/返回风格

支持基于抽象层的设计，将一个复杂问题分解成多个子实现。

- 主程序/子程序：单线程控制，把问题划分为若千个处理步骤,构件即为主程序和子程序，子程序通常可合成为模块。过程调用作为交互机制，即充当连接件的角色。调用关系具有层次性，其语义逻辑表现为主程序的正确性取决于它调用的子程序的正确性
- 面向对象：构件是对象，对象是抽象数据类型的实例。在抽象数据类型中，数据的表示和它们的相应操作被封装起来，对象的行为体现在其接受和请求的动作。连接件即是对象间交互的方式，对象是通过函数和过程的调用来交互的
- 层次结构：构件组织成一个层次结构，连接件通过决定层间如何交互的协议来定义。每层为上一层提供服务，使用下一层的服务，只能见到与自己邻接的层。通过层次结构，可以将大的问题分解为若干个渐进的小问题逐步解决，可以隐藏问题的复杂度。修改某一层，最多影响其相邻的两层(通常只能影响上层)

### 独立构件风格

封装一个构件的同时保证了构件的独立性，构件和构件之间是解耦合的。

- 进程通信：构件是独立的过程，连接件是消息传递。构件通常是命名过程，消息传递的方式可以是点对点、异步或同步方式，以及远程过程(方法)调用等。
- 事件驱动系统(隐式调用)：构件不直接调用一个过程，而是触发或广播个或多个事件。构件中的过程在一个或多个事件中注册，当某个事件被触发时，系统自动调用在这个事件中注册的所有过程。一个事件的触发就导致了另一个模块中的过程调用。这种风格中的构件是匿名的过程，它们之间交互的连接件往往是以过程之间的隐式调用来实现的。主要优点是为软件复用提供了强大的支持，为构件的维护和演化带来了方便；其缺点是构件放弃了对系统计算的控制。

### 虚拟机风格

- 解释器：解释器通常包括一个完成解释T作的解释引擎、一个包含将被解释的代码的存储区、一个记录解释引擎当前工作状态的数据结构，以及一个记录源代码被解释执行的进度的数据结构。具有解释器风格的软件中含有一个虚拟机，可以仿真硬件的执行过程和一些关键应用， 其缺点是执行效率比较低。
- 基于规则的系统：基于规则的系统包括规则集、规则解释器、规则/数据选择器和工作内存，一般用在人工智能领域和DSS中。

### 仓库风格

仓库风格中构件分两种: 一种是中央数据结构，保存系统的当前状态;另一种是独立构件，对中央数据存储进行操作。现代集成编译环境一般采用这种架构风格。

- 数据库系统：数据存储的职能。（黑板具有数据共享、传递、触发的职能）
- 黑板系统：包括知识源、黑板和控制三部分。知识源包括若干独立计算的不同单元，提供解决问题的知识。知识源响应黑板的变化，也只修改黑板；黑板是一个全局数据库，包含问题域解空间的全部状态，是知识源相互作用的唯媒介；知识源响应是通过黑板状态的变化来控制的。黑板系统通常应用在对于解决问题没有确定性算法的软件中(信号处理、问题规划和编译器优化等) 
- 超文本系统：构件以网状链接方式相互连接，用户可以在构件之间进行按照人类的联想思维方式任意跳转到相关构件。超文本是一种非线性的网状信息组织方法，它以结点为基本单位，链作为结点之间的联想式关联。超文本系统通常应用在互联网领域。

### 过程控制

当软件被用来操作一个物理系统时，软件与硬件之间可以粗略地表示为个反馈循环，这个反馈循环通过接受一定的输入，确定系列的输出,最终使环境达到一个新的状态。

适合于嵌入式系统，涉及连续的动作与状态。

![image-20221022200855483](https://geforce-tang.oss-cn-shanghai.aliyuncs.com/imgs/image-20221022200855483.png)

### C2风格

一种并行构件网络，C2架构的基本规则:

- 构件和连接件都有个顶部和一个底部。
- 构件的顶部要连接到连接件的底部，构件的底部要连接到连接件的顶部，构件之间不允许直连。
- 一个连接件可以和任意数目的其它构件和连接件连接。
- 当两个连接件进行直接连接时，必须由其中一个的底部到另个的顶部。

![image-20221022201053390](https://geforce-tang.oss-cn-shanghai.aliyuncs.com/imgs/image-20221022201053390.png)

1. 

### 层次架构风格

#### 两层C/S架构

开发成本较高、客户端程序设计复杂、信息内容和形式单一、用户界面风格不一、软件移植困难、软件维护和升级困难、新技术不能轻易应用

![image-20221023104139836](https://geforce-tang.oss-cn-shanghai.aliyuncs.com/imgs/image-20221023104139836.png)

#### 三层C/S架构

![image-20221023104306493](https://geforce-tang.oss-cn-shanghai.aliyuncs.com/imgs/image-20221023104306493.png)

#### 三层B/S架构

- B/S架构缺乏对动态页面的支持能力，没有集成有效的数据库处理功能
- B/S架构的安全性难以控制
- 采用B/S架构的应用系统,在数据查询等响应速度上，要远远低于C/S架构
- B/S架构的数据提交一般以页面为单位，数据的动态交互性不强，不利于OLTP应用

#### MVC架构

- Model(模型)：是应用程序中用于处理应用程序数据逻辑的部分。通常模型对象负责在数据库中存取数据。比如JSP。
- View(视图)：是应用程序中处理数据显示的部分。通常视图是依据模型数据创建的。比如Servlet。
- Controller(控制器)：是应用程序中处理用户交互的部分。通常控制器负责从视图读取数据，控制用户输入，并向模型发送数据。比如EJB EntityBean SessionBean

MVC分为主动型、被动型以及MVVM，被动型是减少View和Model的交互，而MVVM通过ViewModel彻底解决View和Model的耦合。

#### 富互联网应用（RIA）

应用了一些列的新技术，比如Ajax、H5等。

- RIA结合了C/S架构反应速度快、交互性强的优点，以及B/S架构传播范围广及容易传播的特性
- RIA简化并改进了B/S架构的用户交互
- 数据能够被缓存在客户端，从而可以实现一个比基于HTM的响应速度更快且数据往返于服务器的次数更少的用户界面

### 基于服务的架构（SOA）

服务是一种为了满足某项业务需求的操作、规则等的逻辑组合，它包含一系列有序活动的交互，为实现用户目标提供支持。

![image-20220926204108218](https://geforce-tang.oss-cn-shanghai.aliyuncs.com/imgs/image-20220926204108218.png)

#### 服务的特性

- 服务构件粗粒度，传统构件细粒度居多
- 服务构件的接口是标准的，主要是WSDL接口，传统构件常以具体API形式出现
- 服务构件的实现与语言无关，传统构件绑定某种特定语言
- 服务构件可以通过构件容器提供QoS的服务，传统构件完全由程序代码直接控制

<img src="https://geforce-tang.oss-cn-shanghai.aliyuncs.com/imgs/image-20220926204310806.png" alt="image-20220926204310806" style="zoom: 50%;" />

#### 服务实现方式

WSDL就是WebService接口对应的WSDL文件，该文件通过xml格式说明如何调用，以看作WebService的接口文档(使用说明书)。

- 服务注册：应用开发者(服务提供者)向注册表公布服务的功能
- 服务位置：服务使用者(服务应用开发者)，帮助他们查询注册服务，寻找符合自身要求的服务
- 服务绑定：服务使用者利用检索到的服务接来编写代码，所编写的代码将与注册的服务绑定、调用注册的服务,以及与它们实现互动

| 实现方式                                                     | 架构图                                                       | 层次结构                                                     |
| ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 发现服务：UDDI、DISCO<br />描述服务：WSDL、XML Schema<br />消息格式层：SOAP、REST<br />编码格式层：XML (DOM， SAX) <br />传输协议层：HTTP、TCP/IP 、SMTP等 | <img src="https://geforce-tang.oss-cn-shanghai.aliyuncs.com/imgs/image-20220926204606877.png" alt="image-20220926204606877" style="zoom: 70%;" /> | - 底层传输层<br/>- 服务通信协议层<br/>- 服务描述层<br/>- 服务层<br/>- 业务流程层<br/>- 服务注册层 |

##### SOAP

> Simple Object Access Protocol。

SOAP是一种网络通信协议（HTTP+XML），用于网络上、不同平台、不同语言的应用程序间的通讯。简单对象访问协议，简单的说就是用于访问网络服务的协议；它是基于XML的简易协议，可使应用程序在HTTP之上进行信息交换。

##### REST

REST (Representational State Transfer，表述性状态转移)是一种只使用HTTP和XML进行基于Web通信的技术，可以降低开发的复杂性，提高系统的可伸缩性。

- HTTP + XML进行基于Web通信的技术
- 简单性，缺少严格配置文件
- 只支持几个操作(POST、GET、PUT、 DELETE)
- 强调信息本身，称为资源
  - 网络上的所有事物都被抽象为资源
  - 每个资源对应一个唯一的资源标识
  - 通过通用的连接器接口对资源进行操作
  - 对资源的各种操作不会改变资源标识
  - 所有的操作都是无状态的

#### ESB

企业服务总线（Enterprise Services Bus）

- 提供位置透明性的消息路由和寻址服务
- 提供服务注册和命名的管理功能
- 支持多种的消息传递范型
- 支持多种可以广泛使用的传输协议
- 支持多种数据格式及其相互转换
- 提供日志和监控功能

<img src="https://geforce-tang.oss-cn-shanghai.aliyuncs.com/imgs/image-20220926204753940.png" alt="image-20220926204753940" style="zoom:110%;" />

### 微服务

微服务顾名思义，就是很小的服务，所以它属于面向服务架构的一种。

微服务架构是一种架构模式，它提倡将单一应用程序划分成一组小的服务，服务之间互相协调、互相配合，为用户提供最终价值。每个服务运行在其独立的进程中，服务与服务间采用轻量级的通信机制互相沟通(通常是基于HTTP协议的RESTful API)。每个服务都围绕着具体业务进行构建，并且能够被独立的部署到生产环境、类生产环境等。另外，应当尽量避免统一的、集中式的服务管理机制，对具体的一个服务而言，应根据业务上下文，选择合适的语言、工具对其进行构建。

#### 特点

- 小，职责单一，专注于做一件事情
- 轻量级的通信机制
- 松耦合、独立部署

<img src="https://geforce-tang.oss-cn-shanghai.aliyuncs.com/imgs/image-20220926214018187.png" alt="image-20220926214018187" style="zoom:60%;" />

#### 优势

1. 不同于单一应用的紧耦合，所有功能都在一个进程中；微服务是松耦合，功能在不同微服务的进程中。
2. 技术异构性：可以用不同的语言，不同的数据库。
3. 弹性：灵活性强，针对不同的场景压力能给出不同的应对策略。
4. 扩展：不再需要基于整个系统扩展，可基于独立服务，按需扩展。
5. 简化部署：依托于自动化体系（DevOps）简化人工成本。
6. 与组织结构相匹配
7. 可组合性
8. 对可替代性的优化

#### 面临的挑战

1. 分布式系统的复杂度：事务一致性等各种问题。
2. 运维成本：服务和服务之间的问题定位等难度。
3. 部署自动化：需要完善的流程体系。
4. DevOps与组织结构
5. 服务器依赖测试
6. 服务间依赖管理

#### 对比SOA

特性上的差异：

| 微服务特性                   | SOA特性                                     |
| ---------------------------- | ------------------------------------------- |
| 能拆分的就拆分               | 是整体的，服务能放一起的都放一起            |
| 纵向业务划分                 | 是水平分多层                                |
| 由单一组织负责               | 按层级划分不同部门的组织负责                |
| 细粒度                       | 粗粒度                                      |
| 两句话可以解释明白           | 几百字只相当于SOA的目录                     |
| 独立的子公司                 | 类似大公司里面划分了一些业务单元(BU)        |
| 组件小                       | 存在较复杂的组件                            |
| 业务逻辑存在于每一个服务中   | 业务逻辑横跨多个业务领域                    |
| 使用轻量级的通信方式，如HTTP | 企业服务产总线(ESB)充当了服务之间通信的角色 |

实现上的差异：

| 微服务架构实现                   | SOA实现                          |
| -------------------------------- | -------------------------------- |
| 团队级，自底向上开展实施         | 企业级，自顶向下开展实施         |
| 一个系统被拆分成多个服务，粒度细 | 服务由多个子系统组成，粒度大     |
| 无集中式总线，松散的服务架构     | 企业服务总线，集中式的服务架构   |
| 集成方式简单(HTTP/REST/JSON)     | 集成方式复杂(ESB/WS/SOAP)        |
| 服务能独立部署                   | 单块架构系统，相互依赖，部署复杂 |

### 模型驱动架构

> 属于形式化开发方法，通过定义自动形成代码，有点类似于现在的低代码平台。

模型驱动架构（Model Driven Architecture，MDA），起源于分离系统规约和平台实现的思想，主要目标：Portability (可移植性)，interoperability (互通性) ，Reusability (可重用性)。

- Model：客观事务的抽象表示
- Architecture：构成系统的部件、连接件及其约束的规约
- Model-Driven：使用模型完成软件的分析、设计、构建、部署、维护等各开发活动

MDA的3种核心模型:

- 平台独立模型(PIM)：具有高抽象层次、独立于任何实现技术的模型。
- 平台相关模型(PSM)：为某种特定实现技术量身定做，让你用这种技术中可用的实现构造来描述系统的模型。PIM会被变换成一个或多个PSM。
- 代码Code：用源代码对系统的描述(规约)。每个PSM都将被变换成代码。

<img src="https://geforce-tang.oss-cn-shanghai.aliyuncs.com/imgs/image-20220926220139845.png" alt="image-20220926220139845" style="zoom:80%;" />

## 架构描述语言（ADL）

ADL是这样一种形式化语言，它在底层语义模型的支持下，为软件系统的概念体系结构建模提供了具体语法和概念框架。基于底层语义的工具为体系结构的表示、分析、演化、细化、设计过程等提供支持。ADL的三个基本元素：

- 构件：计算或数据存储单元；
- 连接件：用于构件之间交互建模的体系结构构造块及其支配这些交互的规则；
- 架构配置：描述体系结构的构件与连接件的连接图。

### 主要的架构描述语言

- Aesop：支持体系结构风格的应用；
- MetaH：为设计者提供了关于实时电子控制软件系统的设计指导；
- C2：支持基于消息传递风格的用户界面系统的描述；
- Rapide：支持体系结构设计的模拟并提供了分析模拟结果的工具；
- SADL：提供了关于体系结构加细的形式化基础；
- Unicon：支持异构的构件和连接类型并提供了关于体系结构的高层编译器；
- Wright：支持体系结构构件之间交互的说明和分析。

## 特定领域软件架构（DSSA）

特定领域软件架构是指在某个业务领域下的程序功能开发，实际就是所在公司的业务范畴。而同一个领域下很多概念是相同的，可以提炼完成互用。

通过以架构为导向，分析行业的共性，做行业共性的架构设计以及完成一些业务提炼，以便于为后面大量的应用来做铺垫。

### 基本活动

领域分析（建立领域模型） -> 领域设计（获得DSSA） -> 领域实现（开发和组织可复用信息），这是一个重复的过程，逐步求精。

### 领域分析阶段

1、领域专家：有经验的用户、从事该领域中系统的需求分析、设计、实现以及项目管理的有经验的软件T程师等。领域专家的主要任务包括提供关于领域中系统的需求规约和实现的知识。

2、领域分析人员：领域分析人员应由具有知识工程背景的有经验的系统分析员来担任。

3、领域设计人员：领域设计人员应由有经验的软件设计人员来担任。

4、领域实现人员：领域实现人员应由有经验的程序设计人员来担任。

![image-20221023183117478](https://geforce-tang.oss-cn-shanghai.aliyuncs.com/imgs/image-20221023183117478.png)

### 建立过程

![image-20221023183459351](https://geforce-tang.oss-cn-shanghai.aliyuncs.com/imgs/image-20221023183459351.png)

### 三层次模型

领域开发环境：由**领域架构师**参与，负责参考结构、参考需求、架构、领域模型、开发工具。（类始于产品，负责基础的业务实现）

领域特定应用开发环境：应用工程师参与，对架构设计做实现。（类始于项目，对客户需求在产品的基础上做特殊的定制化改造）

应用执行环境：由操作员参与。（集成开发岗，对系统完成对应的配置化集成）



## 基于构架软件开发（ABSD）

ABSD方法是架构驱动，即强调由业务、质量和功能需求的组合驱动架构设计。ABSD能很好的支持软件重用。

### 基本概念

- 使用ABSD方法，设计活动可以从项目总体功能框架明确就开始，这意味着需求获取和分析还没有完成(甚至远远没有完成)，就开始了软件设计。
- ABSD方法有三个基础。第一个基础是功能的分解。在功能分解中，ABSD方法使用已有的基于模块的内聚和耦合技术；第二个基础是通过选择架构风格来实现质量和业务需求；第三个基础是软件模板的使用。软件模板利用了一些软件系统的结构。
- ABSD方法是递归的，且迭代的每一个步骤都是清晰地定义的。因此，不管设计是否完成，架构总是清晰的，这有助于降低架构设计的随意性。
- 视角与视图：从不同的视角来检查，所以会有不同的视图。
- 用例用来捕获功能需求、特定场景来捕获质量需求。

### 开发过程

架构文档化过程的主要输出结果是架构规格说明和测试架构需求的质量设计说明书这两个文档。文档的完整性和质量是软件架构成功的关键因素。

关于文档的三大注意事项：

- 文档要从使用者的角度进行编写
- 必须分发给所有与系统有关的开发人员
- 且必须保证开发者手上的文档是最新的

架构复审的目的是标识潜在的风险，及早发现架构设计中的缺陷和错误。

1. 主要过程：架构需求（需求分析） -> 架构设计 -> 架构文档化 -> 架构复审（重复0~N，退回到架构设计） -> 架构实现 -> 架构演化。 
2. 架构需求过程：（需求库）-> 需求获取 -> 生成类图 -> 对类进行分组 -> 把类打包成构建 -> 需求评审（迭代）
3. 架构设计过程：提出架构模型 -> 映射构件 -> 分析构件相互作用 -> 产生架构 -> 设计评审（迭代）
4. 架构实现过程：复审后文档化的架构 -> 分析与设计（构件库） -> 架构实现（构件库） -> 架构组装（构件库） -> 系统测试 -> 架构演化
5. 架构演化过程：需求变化归类 -> 架构演化计划 -> 构件变动（构件库） -> 更新构件的相互作用 -> 构建组装与测试 -> 技术评审 -> 演化后的架构

## 软件质量属性

用例是用于获取功能性需求，而场景是用于获取非功能性需求，架构设计在满足功能需求的同时还要满足非功能需求，而质量属性即代表了非功能需求。其中性能、可用性、安全性、可修改性是4大质量属性。

1、性能
**性能(performance)**是指系统的响应能力，即要经过多长时间才能对某个事件做出响应，或者在某段时间内系统所能处理的事件的个数。
代表参数：响应时间、吞吐量
设计策略：优先级队列、资源调度

2、可用性
**可用性(availability)**是系统能够正常运行的时间比例。经常用两次故障之间的时间长度或在出现故障时系统能够恢复正常的速度来表示。
代表参数：故障间隔时间
设计策略：冗余、心跳线

3、安全性
**安全性(security)**是指系统在向合法用户提供服务的同时能够阻止非授权用户使用的企圈或拒绝服务的能力。安全性又可划分为机密性、完整性、不可否认性及可控性等特性。
设计策略:追踪审计

4、可修改性
**可修改性(modifiability)**是指能够快速地以较高的性能价格比对系统进行变更的能力。通常以某些具体的变更为基准，通过考察这些变更的代价衡量可修改性。
主要策略：信息隐藏

5、可靠性
可靠性(reliability)是软件系统在应用或系统错误面前，在意外或错误使用的情况下维持软件系统的功能特性的基本能力。主要考虑两个方面：容错、健壮性。
代表参数：MTTF、 MTBF
设计策略：冗余、心跳线

5、功能性
功能性(functionality)是系统所能完成所期望的工作的能力。一项任务的完成需要系统中许多或大多数构件的相互协作。

7、可变性
可变性( changeability)是指体系结构经扩充或变更而成为新体系结构的能力。这种新体系结构应该符合预先定义的规则，在某些具体方面不同于原有的体系结构。当要将某个体系结构作为一系列相关产品(例如，软件产品线)的基础时，可变性是很重要的。

8、互操作性
作为系统组成部分的软件不是独立存在的，经常与其他系统或自身环境相互作用。为了支持互操作性(interoperation)，软件体系结构必须为外部可视的功能特性和数据结构提供精心设计的软件入口。程序和用其他编程语言编写的软件系统的交互作用就是互操作性的问题，这种互操作性也影响应用的软件体系结构。

## 软件架构评估

风险点：系统架构风险是指架构设计中潜在的、存在问题的架构决策所带来的隐患，而非风险点是指发现的问题或隐患是可以被接受的。

敏感点：是指为了实现某种特定的质量属性，一个或多个构件所具有的特性。

权衡点：是影响多个质量属性的特性，是多个质量属性的敏感点。

![image-20221023191741705](https://geforce-tang.oss-cn-shanghai.aliyuncs.com/imgs/image-20221023191741705.png)

### 评估方式

- 基于调查问卷(检查表)的方式
- 基于度量的方式
- 基于场景的方式

![image-20221023192009434](https://geforce-tang.oss-cn-shanghai.aliyuncs.com/imgs/image-20221023192009434.png)

### 基于场景的方式

- 确定应用领域的功能和软件架构的结构之间的映射
- 设计用于体现待评估质量属性的场景
- 分析软件架构对场景的支持程度

#### 软件架构分析法(SAAM)

SAAM：最初用于分析架构可修改性，后扩展到其它质量属性。

![image-20221024170353357](https://geforce-tang.oss-cn-shanghai.aliyuncs.com/imgs/image-20221024170353357.png)

#### 架构权衡分析法(ATAM)

ATAM：在SAAM的基础上发展起来的，主要针对性能、实用性、安全性和可修改性，在系统开发之前对这些质量属性进行评价和折中。

1. 第一阶段：场景和需求收集

   - 收集场景

   - 收集需求/约束/环境

2. 第二阶段：架构视图和场景实现
   - 描述架构视图
   - 实现场景
3. 第三阶段：属性模型构造和分析
   - 特定属性分析(优秀的单一理论)
4. 第四阶段：折中
   - 标志折中
   - 标志敏感度

## 软件产品线

### 基本概念

基于DSSA发展而来，通过领域业务的沉淀构建软件架构，并逐步演化成软件产品线。

- 核心资源
- 产品集合
- 过程驱动
- 特定领域
- 技术支持
- 以架构为中心

![image-20221024172437247](https://geforce-tang.oss-cn-shanghai.aliyuncs.com/imgs/image-20221024172437247.png)

### 过程模型

#### 双生命周期模型

领域工程做共性的需求功能，应用工程做个性化的需求功能。

![image-20221024172706332](https://geforce-tang.oss-cn-shanghai.aliyuncs.com/imgs/image-20221024172706332.png)

#### SEI模型

![image-20221024172849647](https://geforce-tang.oss-cn-shanghai.aliyuncs.com/imgs/image-20221024172849647.png)

#### 三生命周期模型

![image-20221024172924391](https://geforce-tang.oss-cn-shanghai.aliyuncs.com/imgs/image-20221024172924391.png)

### 建立方式

- 将现有产品演化为产品线
- 用软件产品线替代现有产品集
- 全新软件产品线的演化
- 全新软件产品线的开发

|              | 演化方式                                                     | 革命方式                                                     |
| ------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 基于现有产品 | 基于现有产品架构设计产品线的架构，经演化现有构件，开发产品线构件 | 核心资源的开发基于现有产品集的需求和可预测的、将来需求的超集 |
| 全新产品线   | 产品线核心资源随产品新成员的需求而演化                       | 开发满足所有预期产品线成员的需求的核心资源                   |

### 组织结构

组织结构类型

- 设立独立的核心资源小组（核心产品和应用场景）
- 不设立独立的核心资源小组（构件划分）
- 动态的组织结构

要成功实施产品线，主要取决于以下因素：

- 对该领域具备长期和深厚的经验
- 一个用于构建产品的好的核心资源库
- 好的产品线架构
- 好的管理(软件资源、人员组织、过程)支持

## 构件与中间件技术

### 构件的定义

定义1：软件构件是一种组装单元，它具有规范的接口规约和显式的语境依赖。软件构件可以被独立地部署并由第三方任意地组装。

定义2：构件是某系统中有价值的、几乎独立的并可替换的一个部分，它在良好定义的体系结构语境内满足某清晰的功能。

定义3：构件是一个独立发布的功能部分，可以通过其接口访问它的服务。

| 构件的特性                                                   | 对象的特性                                                   | 模块的特性       |
| ------------------------------------------------------------ | ------------------------------------------------------------ | ---------------- |
| 1.独立部署单元；<br/>2.作为第三方的组装单元；<br/>3.没有(外部的)可见状态。 | 1.一个实例单元，具有唯一的标志。<br/>2.可能具有状态，此状态外部可见。<br/>3.封装了自己的状态和行为。 | 结构化开发的产物 |

#### 构件系统架构特性

构件系统体系结构由一组平台决策、一组构件框架和构件框架之间的互操作设计组成。

构件框架是一种专用的体系结构(通常围绕些关键的机制) ，同时，也是一组固定地作用于构件层次机制的策略。

概念框架的互操作设计包括系统体系结构连接的所有框架间的互操作的规则。

构件是组通常需 要同时部署的原子构件。构件和原子构件之间的区别在于，大多数原子构件永远都不会被单独部署，尽管它们可以被单独部署。

一个原子构件是一个模块和一组资源。

模块是一组类和可能的非面向对象的结构体，比如过程或者函数。

资源是个类型化的项的固定集合。

资源这个概念可以包含代码资源，进而包含模块。问题在于除了编译器编译个模块或包生成的资源外，还可能存在其他的资源。在“纯对象”的方法中，资源是外部化的不可改变的对象一不可改变是因为构件没有持久化的标志，而且复制不能被区分。

### 构件的复用

检索与提取构件 -> 理解与评价构件 -> 修改构件 -> 组装构件

#### 1、检索与提取构件

(1)基于关键字的检索。系统在图形用户界面上将构件库的关键字树形结构直观地展示给用户,复用者通过对树形结构的逐级浏览，寻找需要的关键字并提取相应的构件。

(2)刻面检索法。该方法基于刻面分类法，由三步构成，分别是构造查询、检索构件和对构件进行排序。这种方法的优点是它易于实现相似构件的查找，但复用者在构造查询时比较麻烦。

(3)超文本检索法。复用者首先给出个或数个关键字,系统在构件的说明文档中
进行精确或模糊的语法匹配，匹配成功后，向复用者列出相应的构件说明。这种方法的优点是用户界面友好，但在某些情况下复用者难以在超文本浏览过程中正确选取构件。

#### 2、理解与评价构件

(1)要复用构件，准确地理解构件至关重要。特别是对构件修改使用时。

(2)为达到目的，必须要 求构件的开发过程遵循公共标准。

(3)一般构件库的文档中全面而准确地说明以下内容：构件的功能与行为、相关的领域知识、可适应性约束条件与例外情形、可以预见的修改部分及修改方法。

#### 3、修改构件

(1)理想状态是直接复用构件库中现成的构件，但大多数情况下，必须对构件进行或多或少的修改，以应对新需求。

(2)为了减少构件修改的工作量，要求开发人员尽量使构件的功能、行为和接设
计更为抽象化、通用化和参数化。这样，复用者即可通过对实参的选取来调整构件的功能或行为。如果这种调整仍不足以使构件适用于新系统，复用者就必须借助设计信息和文档来修改构件

(3)构件库中若 无可修改使用的构件，则按新需求开发构件，并存入构件库。

#### 4、组装构件

(1)甚于功能的组装技术。基于功能的组装技术采用子程序调用和参数传递的方式将构件组装起来。它要求库中的构件以子程序/过程/函数的形式出现，井且接口说明必须清晰。当使用这种组装技术进行软件开发时，开发人员首先要对新系统进行功能分解，将系统分解为强内聚、松耦合的功能模块；然后根据各模块的功能需求提取构件，进行适应性修改后，再挂接在上述功能分解框架中。

(2)基于数据的组装技术。基于数据的组装技术首先根据当前软件问题的核心数据结构设计出一个框架，然后根据框架中各结点的需求提取构件并进行适应性修改，再将构件逐个分配至框架中的适当位置。此后，构件的组装方式仍然是传统的子程序调用与参数传递。这种组装技术也要求库中构件以子程序形式出现，但它所依赖的软件设计方法不再是功能分解，而是面向数据的设计方法。例如，Jackson系统开发方法。

(3)面向对象的组装技术。由于封装和继承特征，面向对象方法比其他软件开发方法更适合支持软件复用。在面向对象的软件开发方法中，如果从类库中检索出来的基类能够完全满足新系统的需求，则可以直接应用。否则，必须以基类为父类，生成相应的子类，以满足新系统的需求。

在构件组装阶段失配问题主要包括:

(1)由构件引起的失配，包括由于系统对构件基础设施、构件控制模型和构件数据模型的假设存在冲突引起的失配；

(2)由连接子引起的失配，包括由于系统对构件交互协议、连接子数据模型的假设存在冲突引起的失配；

(3)由于系统成分对全局体系结构的假设存在冲突引起的失配等。要解决失配问题，首先需要检测出失配问题，并在此基础上通过适当的手段消除检测出的失配问题。

### 中间件技术

#### 定义

中间件是种独立的系统软件或服务程序，可以帮助分布式应用软件在不同的技术之间共享资源。

![image-20221024175638873](https://geforce-tang.oss-cn-shanghai.aliyuncs.com/imgs/image-20221024175638873.png)

- 负责客户机与服务器之间的连接和通信，以及客户机与应用层之间的高效率通信机制
- 提供应用层不同服务之间的互操作机制，以及应用层与数据库之间的连接和控制机制
- 提供多层架构的应用开 发和运行的平台，以及应用开发框架，支持模块化的应用开发
- 屏蔽硬件、操作系统、网络和数据库的差异
- 提供应用的负载均衡和高可用性，安全机制与管理功能，以及交易管理机制，保证交易的一致性
- 提供一组通用的服务去执行不同的功能，避免重复的工作和使应用之间可以协作

#### 优点

(1)面向需求。即设计师集中精力于业务逻辑本身。

(2)业务的分隔和包容性。应用开发人员可以按照不同的业务进行功能的划分，体现为不同的接口或交互模式。

(3)设计与实现隔离。构件对外发生作用或构件间的交互，都是通过接进行的，构件使用者只需要知道构件的接口，而不必关心其内部实现，这是设计与实现分离的关键。

(4)隔离复杂的系统资源。架构很重要的一个功能就是将系统资源与应用构件隔离，这是保证构件可复用甚至“即插即用”的基础，与中间件的意图也是一致的。

(5)符合标准的交互模型。中间件则实现了架构的模型，实现了标准的协议。

(6)软件复用。中间件提供了构件封装、交互规则、与环境的隔离等机制，这些都为软件复用提供了方便的解决方案。

(7)提供对应用构件的管理。基于中间件的软件可以方便地进行管理，因为构件总可以通过标识机制进行划分。

### Corba

公共对象请求代理体系结构。

![image-20221024181137708](https://geforce-tang.oss-cn-shanghai.aliyuncs.com/imgs/image-20221024181137708.png)

伺服对象(Servant): CORBA对象的真正实现，负责完成客户端请求。

对象适配器(Object Adapter)：用于屏蔽ORB内核的实现细节，为服务器对象的实现者提供抽象接口，以便他们使用ORB内部的某些功能。

对象请求代理(Object Request Broker)：解释调用并负责查找实现该请求的对象，将参数传给找到的对象，并调用方法返回结果。客户方不需要了解服务对象的位置、通信方式、实现、激活或存储机制。

### J2EE

Bean运行于EJB容器之中，共分三类：

- 会话Bean：描述了与客户端的个短暂的会话。
- 实体Bean：持久化数据，O/R映射。
- 消息驱动Bean：会话Bean+JMS，客户把消息发送给JMS目的地，然后，JMS提供者和EJB容器协作，把消息发送给消息驱动Bean。支持异步消息。

![image-20221024181633131](https://geforce-tang.oss-cn-shanghai.aliyuncs.com/imgs/image-20221024181633131.png)

#### 核心组成

容器：Applet Container、pplication Container、Web Container、EJB Container

组件：Applet、Application、JSP/Servlet、EJB

服务:

- HTTP(Hypertext Transfer Protocol)：超文本传输协议
- RMI-IIOP(Remote Method Invocation ober the Internet Inter-ORB Protocol)：远程方法调用，融合了Java RMI和CORBA(Common Object Rrquest Broker Architecture，公共对象请求代理体系结构)在使用Application或Web端访问EJB端组件是使用
- Java IDL(Java Interface Definition Language)：Java接定义语言，主要用于访问外部的CORBA服务
- JTA(Java Transaction API)：用于进行事务处理操作的API
- JDBC(Java Database Connectivity)：为数据库操作提供的一组API
- JMS(Java Massage Service)：用于发送点对点消息的服务
- JavaMail：用于发送邮件
- JAF(Java Activation Framework)：用于封装传递的邮件数据
- JNDI(Java Naming and Directory Interface
- JAXP(Java API for XML Parsing)：专用于XML解析操作的API
- JCA(J2EE Connector Architecture)：Java连接器构架
- JAAS(Java Authenticati on and Authorization Service)
- JSF(Java Server Faces)
- JSTL(JSP Standard Tag Library)
- SAAJ(SOAP with Attachments API for JAVA)
- JAXR(Java ApI for XML Registries)

## WEB架构设计

从架构来看：MVC，MVP，MWVM, REST，Webservice, 微服务，中台。

从缓存来看：MemCache, Redis ，Squid.

从并发分流来看：集群(负载均衡)、CDN.

从数据库来看：主从库(主从复制)，内存数据库，反规范化技术，NoSQL，分区(分表)技术，视图与物化视图。

从持久化来看：Hibernate，Mybatis.

从分布存储来看：Hadoop，FastDFS，区块链。

从数据编码看：XML，JSON.

从Web应用服务器来看: Apache, WebSphere，Weblogic，Tomcat，JBOSS, IIS. 

其它：静态化，有状态与无状态，响应式Web设计。

### 应用服务器集群

从一开始的单机应用，逐步变成了应用、数据表分开部署，再变成了应用部署多台，这里就需要用到了请求调度和资源共享。

#### 负载均衡

- 静态算法：轮转算法、加权轮转算法、源地址哈希散列算法、目标地址哈希散列算法、随机算法。
- 动态算法：最小连接数算法、加权最小连接数算法、加权百分比算法。

硬件负载均衡: F5，软件负载均衡: LVS、Nginx、HAproxy，按照网络模型分类有：

- 基于特定软件的负载均衡(HTTP重定向) (应用层)
- 反向代理负载均衡(应用层)
- 基于DNS的负载均衡(传输层)
- 基于NAT的负载均衡(传输层)
- 混合型负载均衡

##### 应用层负载均衡

1、http重定向。HTTP重定向就是应用层的请求转发。用户的请求其实已经到了HTTP重定向负载均衡服务器，服务器根据算法要求用户重定向，用户收到重定向请求后，再次请求真正
的集群。
特点：实现简单，但性能较差。

2、反向代理服务器。在用户的请求到达反向代理服务器时(已经到达网站机房), 由反向代理服务器根据算法转发到具体的服务器。常用的apache、nginx都可以充当反向代理服务器。
特点：部署简单，但代理服务器可能成为性能的瓶颈。

##### 传输层负载均衡

1、DNS域名解析负载均衡。DNS域名解析负载均衡就是在用户请求DNS服务器，获取域名对应的IP地址时，DNS服务器直接给出负载均衡后的服务器IP。
特点：效率比HTTP重定向高，减少维护负载均衡服务器成本。但一个应用服务器故障，不能及时通知DNS，而且DNS负载均衡的控制权在域名服务商那里，网站无法做更多的改善和更
强大的管理。

2、基于NAT的负载均衡。基于NAT的负载均衡将一个外部IP地址映射为多个IP地址，对每次连接请求动态地转换为一个内部节点的地址。
特点：技术较为成熟，一般在网关位置，可以通过硬件实现。像四层交换机一般就采用了这种技术。

#### Session一致性

集群情况下可以通过以下方案解决Session一致性问题：

1. 将Session存储到Cookies
2. 服务器集群同步Sessions
3. 使用Redis共享缓存

### 有状态无状态

- 无状态服务(stateless service)对单次请求的处理，不依赖其他请求，也就是说，处理次请求所需的全部信息，要么都包含在这个请求里，要么可以从外部获取到 (比如
  说数据库)，服务器本身不存储任何信息。

- 有状态服务(statefulservice)则相反，它会在自身保存一些数据，先后的请求是有关联的。

### 数据库集群

1、读写分离技术：通过主从数据库，主数据库服务器负责写，然后同步到从数据库，从服务器负责读。

2、分库分表：

### 缓存技术

MemCache：Memcache是一 个高性能的分布式的内存对象缓存系统，用于动态Web应用以减轻数据库负载。Memcache通过在内存里维护个统一的巨大的hash表，它能够用来存储各种格式的数据，包括图像、视频、文件以及数据库检索的结果等。

Redis：Redis是一个开源的使用ANSI C语言编写、支持网络、可基于内存亦可持久化的日志型、Key-Value数据库，并提供多种语言的API。

Squid：Squid是一个高性能的代理缓存服务器，Squid支持FTP、gopher、HTTPS和HTTP协议。和一般的代理缓存软件不同，Squid用一个单独的、非模块化的、IO驱动的进
程来处理所有的客户端请求。

#### Redis与Memcache的差异

1、Redis和Memcache都是将数据存放在内存中，都是内存数据库，他们都支持key-value数据类型。同时Memcache还可用于缓存其他东西，例如图片、视频等等，Redis还支持list,set,hash等数据结构的存储。-> 范围更广

2、Redis支持数据的持久化，可以将内存中的数据保持在磁盘中，重启的时候可以再次加载进行使用。Memcache挂掉之后，数据就没了。

3、灾难恢复-Memcache挂掉后，数据不可恢复: Redis数据丢失后可以恢复。

4、在Redis中，并不是所有的数据都一直存储在内存中的。这是和Memcache相比个最大的区别。当物理内存用完时，Redis可以将一些很久没用到的value交换到磁盘。

5、Redis在很多方面支持数据库的特性，可以这样说他就是一个数据库系统，而Memcache只是简单地K/V缓存。

所以在选择方面如果有持久方面的需求或对数据类型和处理有要求的应该选择Redis。

如果简单的key/value存储应该选择Memcache。

#### 环境常见问题

1、缓存雪崩：大部分缓存失效导致请求压力到数据库上，数据库发生崩溃。

解决方案：

（1）提供缓存的高可用性（减少缓存出故障的概率）

（2）缓存降级（服务器主动拒绝请求的响应，比如限流）

（3）Redis备份

（4）提前演练

2、缓存穿透：查询无数据返回，无数据缓存，每次查询都直接查数据库。

解决方案：

（1）如果查询结果为空，直接设置一个默认值存放到缓存，这样第二次到缓冲中获取就有值了。设置一个不超过5分钟的过期时间，以便能正常更新缓存。

（2）设置布隆过滤器，将所有可能存在的数据哈希到一个足够大的bitmap中，一个一定不存在的数据会被这个bitmap拦截掉，从避免了对底层存储系统的查询压力。

### CDN

CDN的全称是Content Delivery Network，即内容分发网络。其基本思路是尽可能避开互联网上有可能影响数据传输速度和稳定性的瓶颈和环节，使内容传输的更快、更稳定。

### XML

扩展标记语言(Extensible Markup Language,XML)，用于标记电子文件使其具有结构性的标记语言，可以用来标记数据、定义数据类型,是一种允许用户对自己的标记语言
进行定义的源语言。

#### XML的优点

A.格式统一，符合标准；

B.容易与其他系统进行远程交互，数据共享比较方便。

#### XML的缺点

A.XML文件庞大，文件格式复杂，传输占带宽；

B.服务器端和客户端都需要花费大量代码来解析XML，导致服务器端和客户端代码变得异常复杂且不易维护；

C.客户端不同浏览器之间解析XML的方式不一致，需要重复编写很多代码；

D.服务器端和客户端解析XML花费较多的资源和时间。

### JSON

JSON(JavaScript Object Notation)一种轻量级的数据交换格式，具有良好的可读和便于快速编写的特性。可在不同平台之间进行数据交换。

#### JSON的优点

1、数据格式比较简单，易于读写，格式都是压缩的，占用带宽小；

2、易于解析，客户端JavaScript可以简单的通过eval)进行JSON数据的读取；

3、支持多种语言，包括ActionScript, C, C#, ColdFusion, Java, JavaScript, Perl, PHP, Python, Ruby等服务器端语言，便于服务器端的解析；

4、因为JSON格式能直接为服务器端代码使用，大大简化了服务器端和客户端的代码开发量，且完成任务不变，并且易于维护。

#### JSON的缺点

没有XML格式这么推广的深入人心和喜用广泛，没有XML那么通用性。

### WEB应用服务器

WEB应用服务器可以理解为两层意思：

(1)WEB服务器：其职能较为单一，就是把浏览器发过来的Request请求，返回Html页面。

(2)应用服务器：进行业务逻辑的处理。

- Apache：Web服务器，市场占有率达60%左右。它可以运行在几乎所有的Unix、Windows、Linux系统平台上。
- IIS：早期Web服务器，目前小规模站点仍有应用。
- Tomcat：开源、运行servlet和JSP Web应用软件的基于Java的Web应用软件容器。
- JBOSS：JBOSS是基于J2EE的开放源代码的应用服务器。一般与Tomcat或Jetty绑定使用。
- WebSpher：一种功能完善、开放的Web应用程序服务器，它是基于Java的应用环境，用于建立、部署和管理Internet和Intranet Web应用程序。
- WebLogic：BEA WebLogic Server是一种多功能、基于标准的web应用服务器，为企业构建自己的应用提供了坚实的基础。
- Jetty：Jetty是一个开源的servlet容器，它为基于Java的web容器。

### 响应式Web设计

响应式WEB设计是一种网络页面设计布局，其理念是：集中创建页面的图片排版大小，可以智能地根据用户行为以及使用的设备环境进行相对应的布局。

#### 方法与策略

(1)采用流式布局和弹性化设计：使用相对单位，设定百分比而非具体值的方式设置页面元素的大小。

(2)响应式图片：不仅要同比的缩放图片，还要在小设.上降低图片自身的分辨率。

### 中台

中台是一套结合互联网技术和行业特性，将企业核心能力以共享服务形式沉淀，形成"大中台、小前台”的组织和业务机制，供企业快速低成本的进行业务创新的企业架构。中台又可以进步细分，比如业务中台，数据中台，XX中台。

本质上，都是对企业通用能力在不同层面的沉淀，并对外能力开放。

#### 中台的践行者

Supercell：芬兰移动游戏巨头，2015年世界游戏前10占5席，员工仅200多人，因使用中台，具有小团队快速开发能力，后被腾讯86亿美金收购。

阿里：2015年参观Supercell，而后推行中台。

#### 中台的类别

业务中台 VS 数据中台

- 多个电商渠道使用一个下单服务，一个订单接口同时为多个前台系统提供服务。（业务）
- 多个前台系统，根据个用户的手机号，获取对应的画像，用户的标签。（数据）
- 将多个支付通道，抽象建立成一个支付API，暴露给前台业务系统。（业务）
- 通过一个订单编号，来获取可能的商品推荐清单，从而做到交叉销售。（数据）

## 练习题

### 架构风格

1. Java程序可以做到"一次编写，到处运行”，从架构风格上看符合( 虚拟机 )风格的特点。
2. 在网络通信中，进行包的解析，一般先进行包头的分离，然后进行报文解析及后续处理，根据这一特点，选用( 数据流 )风格最合适。
3. 某公司欲开发一个基于图形用户界面的集成调试器。该调试器的编辑器和变量监视器可以设置调试断点。当调试器在断点处暂停运行时，编辑程序可以自动卷屏到断点，变量监视器刷新变量数值。针对这样的功能描述，采用( 隐式调用 ) 的架构风格最为合适。
4. 某游戏公司欲开发一个大型多人即时战略游戏,游戏设计的目标之一是能够支持玩家自行创建战役地图,定义游戏对象的行为和之间的关系。针对该目标，公司应该采用( 解释器 )架构风格最为合适。( 四选一：管道-过滤器、隐式调用、主程序-子程序、解释器)
5. 某公司承接了一个开发家用空调自动调温器的任务，调温器测量外部空气温度，根据设定的期望温度控制空调的开关。根据该需求，公司应采用( 过程控制 ) 架构风格最为合适。(四选一：解释器、过程控制、分层、管道-过滤器)
6. 某公司欲开发一个语音识别系统，语音识别的主要过程包括分割原始语音信号、识别音素、产生候选词、判定语法片断、提供语义解释等。每个过程都需要进行基于先验知识的条件判断并进行相应的识别动作。针对该系统的特点，采用( 黑板 ) 架构风格最为合适。(四选一：解释器、面向对象、黑板、隐式调用)
7. 某公司欲开发一个漫步者机器人，用来完成火星探测任务。机器人的控制者首先定义探测任务和任务之间的时序依赖性，机器人接受任务后，需要根据自身状态和外界环境进行动态调整，最终自动完成任务。针对这些需求，该机器人应该采用( 隐式调用 )架构风格最为合适。( 四选一：解释器、主程序-子程序、隐式调用、管道-过滤器)
8. Windows操作系统在图形用户界面处理方面采用的核心架构风格是( 事件驱动 ) 风格。
9. "编译器”是一种非常重要的基础软件，其核心功能是对源代码形态的单个或一组源程序依次进行预处理、词法分析、语法分析、语义分析、代码生成、代码优化等处理,最终生成目标机器的可执行代码。考虑以下与编译器相关的软件架构设计场景：传统的编译器设计中，上述处理过程都以独立功能模块的形式存在，程序源代码作为一个整体，依次在不同模块中进行传递，最终完成编译过程。针对这种设计思路，传统的编译器采用( B )架构风格比较合适。
   随着编译、链接、调试、执行等开发过程的一体化趋势发展，集成开发环境(IDE)随之出现。IDE集成了编译器、连接器、调试器等多种工具，支持代码的增量修改与处理，能够实现不同工具之间的信息交互，覆盖整个软件开发生命周期。针对这种需求，IDE采用( D )架构风格比较合适。IDE强调交互式编程，用户在修改程序代码后，会同时触发语法高亮显示、语法错误提示、程序结构更新等多种功能的调用与结果呈现，针对这种需求，通常采用( A )架构风格比较合适。
   某公司已经开发了一款针对某种嵌入式操作系统 专用编程语言的IDE，随着一种新的嵌入式操作系统上市并迅速占领市场，公司决定对IDE进行适应性改造，支持采用现有编程语言进行编程，生成符合新操作系统要求的运行代码，并能够在现有操作系统上模拟出新操作系统的运行环境，以支持代码调试工作。针对上述要求，为了使IDE能够生成符合新操作系统要求的运行代码，采用基于( B )的架构设计策略比较合适；为了模拟新操作系统的运行环境，通常采用( D )架构风格比较合适。
   (1) A.管道过滤器	B.顺序批处理	C.过程控制	D.独立进程
   (2) A.规则引擎	B.解释器	C.数据共享	D.黑板
   (3) A.隐式调用	B.显式调用	C.主程序子程序	D.层次结构
   (4) A.代理	B.适配	C.包装	D.模拟
   (5) A.隐式调用	B.仓库结构	C.基于规则	D.虚拟机

## 综合练习

### （1）

在一个典型的基于MVC (Model-View-Controller)的J2EE应用中，分发客户请求、有效组织其它构件为客户端提供服务的控制器由(  )实现。
A. Entity Bean	B. Session Bean	C. Servlet	D. JSP

### （2）

架构复审是基于架构开发中一个重要的环节。以下关于架构复审的叙述中，错误的是（ ） 。
A 架构复审的目标是标识潜在的风险，及早发现架构设计的缺陷和错误
B 架构复审过程中，通常会对一个可运行的最小化系统进行架构评估和测试
C 架构复审人员由系统设计与开发人员组成
D 架构设计、文档化和复审是一个迭代的过程

### （3）

某公司欲开发一个基于图形用户界面的集成调试器。该调试器的编辑器和变量监视器可以设置调试断点。当调试器在断点处暂停运行时，编辑程序可以自动卷屏到断点，变量监视器刷新变量数值。针一对这样的功能描述，采用（ ）的架构风格最为合适。
A.数据共享	B.虚拟机	C.隐式调用	D.显式调用

### （4）

某公司欲开发一种工业机器人，用来进行汽车零件的装配。公司的架构师经过分析与讨论，给出了该机器人控制软件的两种候选架构方案：闭环控制和分层结构。以下对于这两种候选架
构的选择理由，错误的是（ ）。
A.应该采用闭环控制架构，因为闭环结构给出了将软件分解成几个协作构件的方法，这对于复杂任务特别适合
B.应该采用闭环控制结构，因为闭环控制架构中机器人的主要构件监控器、传感器、发动机等是彼此分开的，并能够独立替换
C.应该采用分层结构，因为分层结构很好地组织了用来协调机器人操作的构件，系统结构更加清晰
D.应该采用分层结构，因为抽象层的存在，满足了处理不确定性的需要：在较低层次不确定的实现细节在较高层次会变得确定

### （5）

Architecture Tradeoff Analysis Method (ATAM)是一种软件架构的评估方法，以下关于该方法的叙述中，正确的是（ ）。
A.ATAM是一种代码评估方法
B.ATAM需要评估软件的需求是否准确
C.ATAM需要对软件系统进行测试
D.ATAM不是一种精确的评估工具

### （6）（7）

在RUP中采用"4+1"视图模型来描述软件系统的体系结构。在该模型中，最终用户侧重于（ ），系统工程师侧重于（ ）。
A.实现视图	B.进程视图	C.逻辑视图	D.部署视图
A.实现视图	B.进程视图	C.逻辑视图	D.部署视图

### （8）

软件架构是降低成本、改进质量、按时和按需交付产品的关键因素。以下关于软件架构的描述，错误的是（ ）。
A.根据用户需求，能够确定个最佳的软件架构，指导整个软件的开发过程
B.软件架构设计需要满足系统的质量属性，如性能、安全性和可修改性等
C.软件架构设计需要确定组件之间的依赖关系，支持项目计划和管理活动
D.软件架构能够指导设计人员和实现人员的工作

### （9）（10）

基于软件架构的设计(Architecture Based Software Development,ABSD)强调由商业、质量和功能需求的组合驱动软件架构设计。它强调采用（ ）来描述软件架构，采用（ ）来描述需求。
A.类图和序列图	B.视角与视图	C.构件和类图	D.构件与功能
A.用例与类图	B.用例与视角	C.用例与质量场景	D.视角与质量场景

### （11）（12）

（ ）描述了一类软件架构的特征，它独立于实际问题，强调软件系统中通用的组织结构选择。垃圾回收机制是Java语言管理内存资源时常用的一种（ ）。
A.架构风格	B.开发方法	C.设计模式	D.分析模式
A.架构风格	B.开发方法	C.设计模式	D.分析模式

### （13）

某企业内部现有的主要业务功能已经封装为Web服务。为了拓展业务范围，需要将现有的业务功能进行多种组合，形成新的业务功能。针对业务灵活组合这一要求，采用（ ）架构风格最为合适。
A.管道-过滤器	B.解释器	C.显式调用	D.黑板

### （14）（15）

识别风险点、非风险点、敏感点和权衡点是软件架构评估过程中的关键步骤。针对某系统所作的架构设计中，“系统需要支持的最大并发用户数量直接影响传输协议和数据格式”描述了系统架构设计中的一个（ ）; "由于系统的业务逻辑目前尚不清楚，因此现有系统三层架构中的第二层可能会出现功能重复，这会影响系统的可修改性"描述了系统架构设计中的个（ ）。
A.敏感点	B.风险点	C.非风险点	D.权衡点
A.敏感点	B.风险点	C.非风险点	D.权衡点

### （16）

以下关于软件中间件的叙述，错误的是（ ）。
A.中间件通过标准接实现与应用程序的关联,提供特定功能的服务
B.使用中间件可以提高应用软件可移植性
C.使用中间件将增加应用软件设计的复杂度
D.使用中间件有助于提高开发效率

### （17）

以下叙述，（ ）不是软件架构的主要作用。
A.在设计变更相对容易的阶段，考虑系统结构的可选方案
B.便于技术人员与非技术人员就软件设计进行交互
C.展现软件的结构、属性与内部交互关系
D.表达系统是否满足用户的功能性需求

### （18）（19）（20）（21）（22）（23）

某公司欲开发一个网上商城系统，在架构设计阶段，公司的架构师识别出3个核心质量属性场景，其中"系统主站断电后，能够在2分钟内自动切换到备用站点，并恢复正常运行"主要与（ ）质量属性相关，通常可采用（ ）架构策略实现该属性; "在并发用户数不超过1000人时，用户的交易请求应该在0.5s内完成”主要与（ ）质量属性相关通常可采用（ ）架构策略实现该属性; "系统应该能够抵挡恶意用户的入侵行为，并进行报警和记录"主要与（ ）质量属性相关，通常可采用（ ）架构策略实现该属性。
A.性能	B.可用性	C.易用性	D.可修改性
A.主动冗余	B.信息隐藏	C.抽象接口	D.记录/回放
A.可测试性	B.易用性	C.性能	D.互操作性
A.操作串行化	B.资源调度	C.心跳	D.内置监控器
A.可用性	B.安全性	C.可测试性	D.可修改性
A.内置监控器	B.记录/回放	C.追踪审计	D.维护现有接口

### （24）

将系统需求模型转换为架构模型是软件系统需求分析阶段的一项重要工作，以下描述中，（ ）是在转换过程中需要关注的问题。
A.如何通过多视图模型描述软件系统的架构
B.如何确定架构模型中有哪些元素构成
C.如何采用表格或用例映射保证转换的可追踪性。
D.如何通过模型转换技术，将高层架构模型逐步细化为细粒度架构模型

> AB是属于设计阶段，D是属于实现阶段。

### （25）

某公司拟开发一个VIP管理系统，系统需要根据不同商场活动，不定期更新VIP会员的审核标准和VIP折扣系统。针对上述需求，采用（ ）架构风格最为合适。
A.规则系统	B.过程控制	C.分层	D.管道-过滤器

### （26）

某公司拟开发一个地面清洁机器人。机器人的控制者首先定义清洁任务和任务之间的关系，机器人接受任务后，需要响应外界环境中触发的一些突发事件，根据自身状态进行动态调整，最终自动完成任务。针对上述需求，该机器人应该采用（ ）架构风格最为合适。
A.面向对象	B.主程序-子程序	C.规则系统	D.管道-过滤器

### （27）

某公司拟开发一个语音识别系统，其语音识别的主要过程包括分割原始语音信号、识别音素、产生候选词、判定语法片断、提供语义解释等，每个过程都需要进行基于先验知识的条件判断并进行相应的识别动作。针对该系统的特点，采用（ ）架构风格最为合适。
A.解释器	B.面向对象	C.黑板	D.隐式调用

### （28）（29）（30）

特定领域软件架构(Domain Specific Software Architecture,DSSA)以一个特定问题领域为对象，形成由领域参考模型，参考需求，（ ）等组成的开发基础架构，支持个特定领域中多个应用的生成。DSSA的基本活动包括领域分析、领域设计和领域实现。其中领域分析的主要目的是获得（ ），从而描述领域中系统之间共同的需求，即领域需求；领域设计的主要目标是获得（ ），从而描述领域模型中表示需求的解决方案；领域实现的主要目标是开发和组织可重用信息，并实现基础软件架构。
A.参考设计	B.参考规约	C.参考架构	D.参考实现
A.领域边界	B.领域信息	C.领域对象	D.领域模型
A.特点领域软件需求	B.特定领域软件架构	C.特定领域软件设计模型	D.特定领域软件重用模型

### （31）

软件架构文档是对软件架构的正式描述，能够帮助与系统有关的开发人员更好地理解软件架构。软件架构文档的写作应该遵循一定的原则。以下关于软件架构文档写作原则的叙述中，错误的是（ ）。
A.架构文档应该从架构设计者的角度进行编写
B.应该保持架构文档的即时更新，但更新不要过于频繁
C.架构文档中的描述应该尽量避免不必要的重复
D.每次架构文档修改,都应该记录修改的原则

### （32）（33）

Windows操作系统在图形用户界面处理方面采用的核心架构风格是（ ）风格。Java语言宣传的“一次编写，到处运行”的特性，从架构风格上看符合（ ）风格的特点。
A.虚拟机	B.管道-过滤器	C.事件驱动	D.微内核-扩展
A.虚拟机	B.管道-过滤器	C.事件驱动	D.微内核-扩展

### （34）（35）（36）

（ ）的选择是开发一个软件系统时的基本设计决策；（ ）是最低层的模式，关注软件系统的设计与实现，描述了如何实现构件及构件之间的关系。引用一计数是C++管理动态资源时常用的一种（ ）。
A.架构模式	B.惯用法	C.设计模式	D.分析模式
A.架构模式	B.惯用法	C.设计模式	D.分析模式
A.架构模式	B.惯用法	C.设计模式	D.分析模式

### （37）

分布式系统开发中，通常需要将任务分配到不同的逻辑计算层。业务数据的综合计算分析任务属于（ ）。
A.表示逻辑层	B.应用逻辑层	C.数据处理层	D.数据层

### （38）

软件架构设计包括提出架构模型、产生架构设计和进行设计评审等活动，是个迭代的过程。以下关于软件架构设计活动的描述，错误的是（ ）。
A.在建立软件架构的初期，一般需要选择一个合适的架构风格
B.将架构分析阶段已标识的构件映射到架构中，并分析这些构件之间的关系
C.软件架构设计活动将已标识构件集成到软件架构中，设计并实现这些构件
D.一旦得到了详细的软件架构设计，需要邀请独立于系统开发的外部人员对系统进行评审

### （39）

某公司欲为某种型号的示波器开发内置软件。该公司的架构师设计了如下图所示的软件架构。在软件架构评审时，专家认为该架构存在的问题是（ ）。

![image-20221025182441506](https://geforce-tang.oss-cn-shanghai.aliyuncs.com/imgs/image-20221025182441506.png)

A.在功能划分上将各个模块独立起来
B.在硬件构件的混合和替换方面不是很灵活
C.没有清晰地说明用户怎样与其交互
D.没有明确的层次关系，没有强调功能之间的交互

### （40）（41）（42）

1995年Kruchten提出了著名的“4+1"视图，用来描述软件系统的架构。在"4+1"视图中，（ ）用来描述设计的对象模型和对象之间的关系；（ ）描述了软件模块的组织与管理；（ ）描述设计的并发和同步特征。
A.逻辑视图	B.用例视图	C.过程视图	D.开发视图
A.逻辑视图	B.用例视图	C.过程视图	D.开发视图
A.逻辑视图	B.用例视图	C.过程视图	D.开发视图

### （43）

架构权衡分析方法(ATAM)是种常用的软件架构评估方法，下列关于该方法的叙述中，正确的是（ ）。
A.ATAM需要对代码的质量进行评估
B.ATAM需要对软件系统需求的正确性进行评价
C.ATAM需要对软件系统进行集成测试
D.ATAM需要对软件质量属性进行优先级排序

### （44）（45）（46）（47）（48）

某公司采用基于架构的软件设计(Architecture-Based Software Design，ABSD)方法进行软件设计与开发。ABSD方法有三个基础，分别是对系统进行功能分解、采用（ ）实现质量属性与商业需求、采用软件模板设计软件结构。
ABSD方法主要包括架构需求等6个主要活动，其中（ ）活动的目标是标识潜在的风险，及早发现架构设计中的缺陷和错误：（ ）活动针对用户的需求变化，修改应用架构，满足新的需求。
小王是该公司的一位新任架构师，在某项目中主要负责架构文档化方面的工作。小王（ ）的做法不符合架构文档化的原则。架构文档化的主要输出结果是架构规格说明书和（ ）。
A.架构风格	B.设计模式	C.架构策略	D.架构描述
A.架构设计	B.架构实现	C.架构复审	D.架构演化
A.架构设计	B.架构实现	C.架构复审	D.架构演化
A.从使用者的角度书写文档
B.随时保证文档都是最新的
C.将文档分发给相关人员
D.针对不同背景的人员书写文档的方式不同
A.架构需求说明书	B.架构实现说明书	C.架构质量说明书	D.架构评审说明书

### （49）

以下关于软件架构设计重要性的描述，（ ）是错误的。
A.软件架构设计能够满足系统的性能、安全性、可维护性等品质
B.软件架构设计能够帮助项目干系人(Stakeholder)更好地理解软件结构
C.软件架构设计能够帮助架构师更好地捕获和细化系统需求
D.软件架构设计能够有效地管理系统的复杂性，并降低系统维护费用

### （50）（51）

特定领域软件架构(Domain Specific Software Architecture, DSSA)是在一个特定应用领域中，为一组应用提供组织结构参考的标准软件体系结构。参加DSSA的
人员可以划分为多种角色，其中（ ）的任务是控制整个领域分析过程，进行知识获取，将获取的知识组织到领域模型中；（ ）的任务是根据领域模型和现有系统开发出DSSA，并对DSSA的准确性和一致性进行验证。
A.领域专家	B.领域分析者	C.领域设计者	D.领域实现者
A.领域专家	B.领域分析者	C.领域设计者	D.领域实现者

### （52）（53）

软件架构风格描述某一特定领域中的系统组织方式和惯用模式，反映了领域中众多系统所共有的（ ）特征。对于语音识别、知识推理等问题复杂、解空间很大、求解过程不确定的这一类软件系统。通常会采用（ ）架构风格。
A.语法和语义	B.结构和语义	C.静态和动态	D.行为和约束
A.管道-过滤器	B.解释器	C.黑板	D.过程控制

### （54）（55）（56）（57）（58）（59）

某公司欲开发一个在线交易系统，在架构设计阶段，公司的架构师识别出3个核心质量属性场景。其中“当系统面临断电故障后，需要在1小时内切换至备份站点并恢复正常运行”主要与
（ ）质量属性相关，通常可采用（ ）架构策略实现该属性；"在并发用户数量为1000人时，用户的交易请求需要在0.5秒内得到响应”主要与（ ）质量属性相关，通常可采用（ ）架构策略实现该属性；”对系统的消息中间件进行替换时，替换T作需要在5人/月内完成“主要与（ ）质量属性相关，通常可采用（ ）架构策略实现该属性。
A.性能	B.安全性	C.可用性	D.可修改性
A.操作隔离	B.资源调度	C.心跳	D.内置监控器
A.性能	B.易用性	C.可用性	D.互操作性
A.主动冗余	B.资源调度	C.抽象接口	D.记录/回放
A.可用性	B.安全性	C.可测试性	D.可修改性
A.接口-实现分离	B.记录/回放	C.内置监控器	D.追踪审计

### （60）（61）

识别风险、非风险、敏感点和权衡点是进行软件架构评估的重要过程。“改变业务数据编码方式会对系统的性能和安全性产生影响”是对（ ）的描述，"假设用户请求的频率为每秒1个，业务处理时间小于30毫秒，则将请求响应时间设定为1秒钟是可以接受的"是对（ ）的描述。
A.风险点	B.非风险	C.敏感点	D.权衡点
A.风险点	B.非风险	C.敏感点	D.权衡点

### （62）

以下关于软件架构风格与系统性能的关系叙述中，错误的是（ ）。
A.对于采用层次化架构风格的系统，划分的层次越多，系统的性能越差
B.对于采用隐式调用架构风格的系统，可以通过处理函数的并发调用提高系统处理性能
C.采用面向对象架构风格的系统，可以通过引入对象管理层提高系统性能
D.对于采用解释器架构风格的系统，可以通过部分解释代码预先编译的方式提高系统性能

### （63）

架构描述语言(Architecture Description Language，ADL)是一种为明确说明软件系统的概念架构和对这些概念架构建模提供功能的语言。ADL主要包括以下组成
部分：组件、组件接口、（ ）和架构配置。
A.架构风格	B.架构实现	C.连接件	D.组件约束

### （64）

某公司拟开发了个轿车巡航定速系统，系统需要持续测量车辆当前的实时速度，并根据设定的期望速度启动控制轿车的油门和刹车。针对上述需求，采用（ ）架构风格最为合适。
A.解释器	B.过程控制	C.分层	D.管道过滤器

### （65）

某公司拟开发一套在线游戏系统，该系统的设计目标之一是支持用户自行定义游戏对象属性，行为和对象之间的交互关系。为了实现上述目标，公司应该采用（ ）架构风格最为合适。
A.管道-过滤器	B.隐式调用	C.主程序-子程序	D.解释器

### （66）

某公司为其研发的硬件产品设计实现了一种特定的编程语言，为了方便开发者进行软件开发，公司拟开发一套针对该编程语言的集成开发环境，包括代码编辑、语法高亮、代码编译、运行调试等功能。针对上述描述，该集成开发环境应采用（ ）架构风格最为合适。
A.管道-过滤器
B.数据仓储
C.主程序子程序
D.解释器

### 答案

|  1~10   |  11~20  |  21~30  |  31~40  |  41~50  |  51~60  |  61~70  |
| :-----: | :-----: | :-----: | :-----: | :-----: | :-----: | :-----: |
| （1）C  | （11）A | （21）B | （31）A | （41）D | （51）C | （61）B |
| （2）C  | （12）C | （22）B | （32）C | （42）C | （52）B | （62）C |
| （3）C  | （13）B | （23）C | （33）A | （43）D | （53）C | （63）C |
| （4）A  | （14）A | （24）C | （34）A | （44）A | （54）C | （64）B |
| （5）D  | （15）B | （25）A | （35）B | （45）C | （55）C | （65）D |
| （6）C  | （16）C | （26）C | （36）B | （46）D | （56）A | （66）B |
| （7）D  | （17）D | （27）C | （37）B | （47）B | （57）B |         |
| （8）A  | （18）B | （28）C | （38）C | （48）C | （58）D |         |
| （9）B  | （19）A | （29）D | （39）C | （49）C | （59）A |         |
| （10）C | （20）C | （30）B | （40）A | （50）B | （60）D |         |

