---
title: 系统配置与性能评价
date: 2022-09-24 13:49:50
categories: 软考笔记
tags: 系统分析
---

## 知识点提要
> - 性能指标(⭐⭐)
> - 阿姆达尔解决方案(⭐)
> - 性能评价方法(⭐⭐)

## 性能系统

### 系统性能概述

计算机性能分为2个大的章节：

1. 可靠性或可用性（系统能正常工作的时间）
   - 能够正常工作的时间长度(如，平均无故障时间)
   - 一段时间内能够正常工作的时间所占百分比
2. 处理能力或效率
   - 吞吐率(如，系统在单位时间内能处理正常作业的个数)
   - 响应时间(从 系统得到输入到给出输出之间的时间)
   - 资源利用率，即在给定的时间区间中，各种部件(包括硬件设备和软件系统)被使用的时间与整个时间之比

#### 例题

##### 例题1

计算机系统的性能一般包括两个大的方面。一个方面是它的( A )，也就是计算机系统能正常工作的时间，其指标可以是能够持续工作的时间长度，也可以是在一段时间内，能正常工作的时间所占的百分比;另一个方面是处理能力，这又可分为三类指标，第一类指标是吞吐率，第二类指标是响应时间，第三类指标是( B )，即在给定时间区间中，各种部件被使用的时间与整个时间之比。
A 可用性	B 安全性	C 健壮性	D 可伸缩性
A 可靠性	B 资源利用率	C 系统负载	D 吞吐量

##### 例题2

信息系统的性能评价指标是客观评价信息系统性能的依据，其中，( B )是指系统在单位时间内处理请求的数量。
A 系统响应时间	B 吞吐量	C 资源利用率	D 并发用户数

### 性能指标

#### 硬件

1. 计算机：**时钟频率(主频)** ;运算速度与精度;内存的存储容量;存储器的存取周期;**数据处理速率PDR;吞吐率**;各种响应时间;各种利用率; RASIS特性; 平均故障响应时间;兼容性;可扩充性;性能价格比。
2. 路由器：设备吞吐量、**端口吞吐量**、全双工线速转发能力、**丢包率、时延、时延抖动**、VPN支持能力、端口硬件队列数、基于Web的管理、网管类型等。

3. 交换机：交换机类型、配置、支持的网络类型、最大ATM端口数、**支持协议和标准**等
4. 网络：设备级性能指标;网络级性能指标;应用级性能指标;用户级性能指标;**吞吐量**。

#### 软件

1. 操作系统：系统的可靠性、**系统的吞吐率(量)、系统响应时间**、系统资源利用率、可移植性。
2. 数据库管理系统：衡量数据库管理系统的主要性能指标包括数据库本身和管理系统两部分，有：数据库的大小、数据库中表的数量、单个表的大小、表中允许的记录(行)数量、单个记录(行)的大小、表上所允许的索引数量、数据库所允许的索引数量、**最大并发事务处理能力、负载均衡能力、最大连接数**等。
3. WEB服务器：**最大并发连接数、响应延迟、吞吐量**。

#### 计算类指标

- 字长和数据通路宽度
- 主存容量和存取速度
- 运算速度
- 吞吐量与吞吐率
- 响应时间(RT) 与完成时间(TAT)
- 兼容性

#### 运算速度

> 平均每条指令的平均时钟周期个数(CPI, clock per instruction)
> 每(时钟)周期运行指令条数(IPC， instruction per clock)
> 百万条指令每秒(MIPS, Million Instructions Per Second)
> 每秒百万个浮点操作(MFLOPS, Million Floating-point Operations per Second)
> 响应时间(RT, Response Time)

- 主频=外频*倍频
- 主频与CPU时钟周期
- CPI与IPC
- MIPS与MFLOPS

MIPS = 指令条数/(执行时间 X 10<sup>6</sup>)= 主频/CPI = 主频 X IPC

MFLOPS = 浮点操作次数/(执行时间 X 10<sup>6</sup>)

### 性能调整

性能调整由查找和消除瓶颈组成：准备工作（识别约束、指定负载、设定性能目标） -> 建立边界和期望 -> PDCA（分析、收集、配置、测试）

当系统性能降到最基本的水平时

- 数据库系统：性能调整主要包括CPU/内存使用状况、优化数据库设计、优化数据库管理以及进程/线程状态、硬盘剩余空间、日志文件大小等;
- 应用系统：性能调整主要包括应用系统的可用性、响应时间、并发用户数以及特定应用的系统资源占用等。

#### 例题

为了优化系统的性能，有时需要对系统进行调整。对于不同的系统，其调整参数也不尽相同。例如，对于数据库系统，主要包括CPU/内存使用状况、( D )、进程/线程使用状态、日志文件大小等。对于应用系统，主要包括应用系统的可用性、响应时间、( A )、特定应用资源占用等。
A 数据丢包率	B 端口吞吐量	C 数据处理速率	D 查询语句性能
A 并发用户数	B 支持协议和标准	C 最大连接数	D 时延抖动

## 阿姆达尔解决方案

对系统中某组件采用某种更快的执行方式，所获得的系统性能的改变程度，取决于该组件被使用的频率，或所占总执行时间的比例。加速比计算公式如下:
$$
R= \frac{Tp}{Ti}=\frac{1}{(1- Fe)+ Fe/Se}
$$

其中，Tp表示不使用改进组件时完成整个任务的时间，Ti表示使用改进组件时完成整个任务的时间。加速比主要取决于两个因素:

(1)在原有的系统上，能被改进的部分在总执行时间中所占的比例。这个值称为改进比例，记为Fe,它总是小于1。

(2)通过改进的执行方式所取得的性能提高，即如果整个系统使用了改进的执行方式，那么，系统的执行速度会有多少提高，这个值等于在原来的条件下系统的执行时间与使用改进组件后系统的执行时间之比，记为Se,它总大于1。

### 例题

#### 例题1

阿姆达尔(Amdahl)定律量化定义了通过改进系统中某个组件的性能，使系统整体性能提高的程度。假设某一功能的处理时间为 整个系统运行时间的60%，若使该功能的处理速度提高至原来的5倍，则根据阿姆达尔定律，整个系统的处理速度可提高至原来的( )倍。
A 1.333	B 1.923	C 1.5	D 1.829

解题：

![image-20220924144942371](https://geforce-tang.oss-cn-shanghai.aliyuncs.com/imgs/image-20220924144942371.png)

#### 例题2

假设单个CPU的性能为1，则由n个这种CPU组成的多处理机系统的性能P为:
$$
p = \frac{n}{1+(n-1)a}
$$
其中，a是一个表示开销的常数。例如，a=0.1, n=4时，P约为3。也就是说，由4个这种CPU组成的多机系统的性能约为3。该公式表明，多机系统的性能有一个上限，不管n如何增加，P都不会超过某个值。当a=0.1时， 这个上限是( )。
A 5	B 10	C 15	D 20

**解题：**

方法一：求极限，数学中的求极限，当n趋向于无穷大时，公式中的常数均可以忽略不计。

<img src="https://geforce-tang.oss-cn-shanghai.aliyuncs.com/imgs/image-20220924145845465.png" alt="image-20220924145845465" style="zoom:67%;" />

方法二：代入法，分别导入1 10 100 1000 10000，看结果是多少。

## 性能评价方法

- 时钟频率法：以时钟频率高低衡量速度。
- 指令执行速度法：表示机器运算速度的单位是MIPS。
- 等效指令速度法(Gibson mix,吉普森混合法)：通过各类指令 在程序中所占的比例(W)进行计算得到的。**特点:考虑指令比例不同的问题。**
- 数据处理速率法(PDR，Processing Data Rate)：PDR值的方法来衡量机器性能，PDR值越大，机器性能越好。PDR=L/R特点: **考虑CPU+存储**
- 综合理论性能法(CTP，Composite Theoretical Performance)：CTP用MTOPS (MillionTheoretical Operations Per Second,每秒百万次理论运算)表示。CTP的估算方法是，首先算出处理部件每个计算单元的有效计算率，再按不同字长加以调整，得出该计算单元的理论性能，所有组成该处理部件的计算单元的理论性能之和即为CTP。
- **基准程序法**：把应用程序中用得最多、最频繁的那部分核心程序作为评估计算机系统性能的标准程序，**称为基准测试程序(benchmark) **。基准程序法是目前一致承认的测试系统性能的较好方法。

### 基准程序

测试精确度排名：真实的程序 > 核心程序 > 小型基准程序 > 合成基准程序

- Dhrystone基准程序: 它是一个综合性的整数基准测试程序，是为了测试编译器和CPU处理整数指令和控制功能的有效性，人为地选择-些典型指令综合起来形成的测试程序。
- Linpack基准程序:它是国际上最流行的用于测试高性能计算机系统浮点性能的测试。
- Whetstone基准程序: 它是用Fortran语言编写的综合性测试程序，主要由执行浮点运算、功能调用、数组变址、条件转移和超越函数的程序组成。
- SPEC基准程序: 一种是测试计算机完成单项任务有多快，称为速度测试;另-种 是测试计算机在一-定时间内能完成多少项任务，称为吞吐率测试。
- TPC基准程序: TPC (Transaction Processing Council, 事务处理委员会)基准程序用以评测计算机在事务处理、数据库处理、企业管理与决策支持系统等方面的性能。该基准程序的评测结果用每秒完成的事务处理数TPC来表示。
  - TPC-A基准程序规范用于评价在OLTP环境下的数据库和硬件的性能;
  - TPC-B测试的是不包括网络的纯事务处理量，用于模拟企业计算环境;
  - TPC-C测试的是联机订货系统;
  - TPC-D、TPC-H和TPC-R测试的都是决策支持系统，其中TPC-R允许有附加的优化选项;
  - TPC-E测试的是大型企业信息服务系统。
  - TPC-W是基于Web应用的基准程序，用来测试一些通过Internet进行市 场服务和销售的商业行为，所以TPC-W可以看作是一个服务器的测试标准。

### 例题

#### 例题1

把应用程序中应用最频繁的那部分核心程序作为评价计算机性能的标准程序，称为( C )程序。( A )不是对Web服务器进行性能评估的主要指标。
A 仿真测试	B 核心测试	C 基准测试	D 标准测试
A 丢包率	B 最大并发连接数	C 响应延迟	D 吞吐量

#### 例题2

通常用户采用评价程序来评价系统的性能，评测准确度最高的评价程序是( A )。在计算机性能评估中，通常将评价程序中用得最多、最频繁的( B )作为评价计算机性能的标准
程序，称其为基准测试程序。
A 真实程序	B 核心程序	C 小型基准程序	D 核心基准程序
A 真实程序	B 核心程序	C 小型基准程序	D 核心基准程序

#### 例题3

以下关于计算机性能改进的叙述中，正确的是( B )。
A 如果某计算机系统的CPU利用率已经达到100%则该系统不可能再进行性能改进
B 使用虚存的计算机系统如果主存太小，则页面交换的频率将增加，CPU的使用效率就会降低，因此应当增加更多的内存
C 如果磁盘存取速度低，引起排队，此时应安装更快的CPU.以提高性能
D 多处理机的性能正比于CPU的数目，增加CPU是改进性能的主要途径

#### 例题4

评价计算机系统性能的方法主要有三种，不包括( D )。
A 测量方法	B 分析方法	C 模拟方法	D 用户调查方法

<img src="https://geforce-tang.oss-cn-shanghai.aliyuncs.com/imgs/image-20220924151002945.png" alt="image-20220924151002945" style="zoom:67%;" />

#### 例题5

以下关于系统性能评估方法的描述，错误的是( B )。
A 指令执行速度法常用每秒百万次指令运算(MIPS) 评估系统性能
B 基准程序法主要针对CPU (有时包括主存)的性能，但没有考虑I/O结构、操作系统、编译程序的效率等对系统性能的影响
C 等效指令速度法评估系统性能时需要计算各类指令在程序中所占的比例
D 综合理论性能法(CTP) 采用每秒百万次理论运算(MTOPS) 评估系统性能

