---
title: 系统可靠性分析与设计
date: 2022-10-8 20:57:15
categories: 软考笔记
tags: 软考高级
---

## 知识点提要

> - 可靠性相关基本概念(⭐⭐)
> - 系统可靠性分析(⭐⭐⭐⭐)
> - 软件可靠性设计(⭐⭐⭐⭐)

## 可靠性基本概念

> 可靠性是软件系统在应用或系统错误面前，在意外或错误使用的情况下维持软件 系统的功能特性的基本能力。
>
> 而可用性是系统能够正常运行的时间比例。

软件可靠性≠硬件可靠性

➢复杂性：软件复杂性比硬件高，大部分失效来自于软件失效。

➢物理退化：硬件失效主要是物理退化所致，软件不存在物理退化。

➢唯一性：软件是唯一的，每个COPY版本都一样，而两个硬件不可能完全一样。

➢版本更新周期：硬件较慢，软件较快。

### 可靠性指标

- 平均无故障时间(MTTF) → MTTF=1/λ，λ为失效率
- 平均故障修复时间(MTTR) → MTTR=1/μ, μ为修复率
- 平均故障间隔时间(MTBF) → MTBF= MTTR+MTTF
- 系统可用性 → MTTF/(MTTR+MTTF) X 100%

![image-20221008210338926](https://geforce-tang.oss-cn-shanghai.aliyuncs.com/imgs/image-20221008210338926.png)

在实际应用中，一般MTTR很小，所以通常认为MTBF≈MTTF。

## 系统可靠性分析

### 串联系统

![image-20221008210706293](https://geforce-tang.oss-cn-shanghai.aliyuncs.com/imgs/image-20221008210706293.png)

### 并联系统

![image-20221008210721925](https://geforce-tang.oss-cn-shanghai.aliyuncs.com/imgs/image-20221008210721925.png)

### 混合系统

![image-20221008210721925](https://geforce-tang.oss-cn-shanghai.aliyuncs.com/imgs/image-20221008211110940.png)
$$
R\times(1-(1- R)^{3})\times(1-(1-R)^{2})
$$

## 软件可靠性设计

### 影响可靠性因素

影响软件可靠性的主要因素：

1. 软件的开发方法和开发环境
2. 运行环境
3. 软件系统[软件规模]
4. 软件内部结构
5. 软件的可靠性投入

### 设计策略

- 避错技术：比如软件测试，但不能保障100%。
- 降低复杂度设计：使用良好的架构设计。
- 检错技术：使用检查机制，在出错后报警，人工处理，成本较低。
- 容错技术：以冗余为基础，包含结构冗余(硬件冗余、软件冗余)、信息冗余(校验码)、时间冗余(重复多次进行相同的计算)
  - N版本程序设计(静态冗余)
  - 恢复块设计(动态冗余)
  - 防卫式程序设计

### N版本程序设计

![image-20221008213719226](https://geforce-tang.oss-cn-shanghai.aliyuncs.com/imgs/image-20221008213719226.png)

与通常软件开发过程不同的是，N版本程序设计增加了三个新的阶段：相异成分规范评审、相异性确认、背对背测试

N版本程序的同步、N版本程序之间的通信、表决算法(全等表决、非精确表决、Cosmetie表决)、一致比较问题、数据相异性

### 恢复块设计

![image-20221008213928746](https://geforce-tang.oss-cn-shanghai.aliyuncs.com/imgs/image-20221008213928746.png)


设计时应保证实现主块和后备块之间的独立性，避免相关错误的产生，使主块和备份块之间的共性错误降到最低程度。

必须保证验证测试程序的正确性。

![image-20221008214006980](https://geforce-tang.oss-cn-shanghai.aliyuncs.com/imgs/image-20221008214006980.png)

### 防卫式程序设计

> 使用try Catch机制来解决异常情况。

对于程序中存在的错误和不一致性，通过在程序中包含错误检查代码和错误恢复代码，使得一旦错误发生，程序能撤销错误状态，恢复到一个已知的正确状态中去。

实现策略: 错误检测、破坏估计、错误恢复。

### 双机容错

> 双机模式是集群的前身

![image-20221008214602898](https://geforce-tang.oss-cn-shanghai.aliyuncs.com/imgs/image-20221008214602898.png)

- 双机热备模式 (主系统、备用系统)：同一时间只有一台服务器在运行，备用服务器只有主服务器宕机之后才会运行。（资源浪费比较严重）
- 双机互备模式(同时提供不同的服务，心不跳则接管)：热备的一种变形，只是备用机器在做为备用的同时也承接了其他业务的主系统。
- 双机双工模式(同时提供相同的服务，集群的一种)：都做为主服务器，各自承接50%请求，一台宕机后另一台承接100%。



## 案例分析

### （1）

阅读以下信息系统可靠性问题的说明，在答题纸上回答问题1至问题3。
[说明]
某软件公司开发一项基于数据流的软件，其系统的主要功能是对输入数据进行多次分析、处理和加工，生成需要的输出数据。需求方对该系统的软件可靠性要求很高，要求系统能够长时间无故障运行。该公司将该系统设计交给王工负责。王工给出该系统的模块示意图如图1所示。王工解释：只要各个模块的可靠度足够高，失效率足够低，则整个软件系统的可靠性是有保证的。

![image-20221027090340498](https://geforce-tang.oss-cn-shanghai.aliyuncs.com/imgs/image-20221027090340498.png)

李工对王工的方案提出了异议。李工认为王工的说法有两个问题：第一，即使每个模块的可靠度足够高，但是整个软件系统模块之间全部采用串联，则整个软件系统的可靠度明显下降。假设各个模块的可靠度均为0.99，则整个软件系统的可靠度为0.994=0.96；第二，软件系统模块全部采用串联结构时，一旦某个模块失效，则意味着整个软件系统失效。
李工认为，应该在软件系统中采用冗余技术中的动态冗余或者软件容错的N版本程序设计技术，对容易失效或者非常重要的模块进行冗余设计，将模块之间的串联结构部分变为并联结构，来提高整个软件系统的可靠性。同时，李工给出了采用动态冗余技术后的软件系统模块示意图，如图2所示。

![image-20221027090557369](https://geforce-tang.oss-cn-shanghai.aliyuncs.com/imgs/image-20221027090557369.png)

刘工建议，李工方案中M1和M4模块没有采用容错设计，但M1和M4发生故障有可能导致严重后果。因此，可以在M1和M4模块设计上采用检错技术，在软件出现故障后能及时发现并报警，
提醒维护人员进行处理。
注：假设各个模块的可靠度均为0.99。

#### [问题1] (4分)

在系统可靠性中，可靠度和失效率是两个非常关键的指标，请分别解释其含义。

可靠度就是系统在规定的条件下、规定的时间内不发生失效的概率。
失效率又称风险函数，也可以称为条件失效强度，是指运行至此刻系统未出现失效的情况下，单位时间系统出现失效的概率。

#### [问题2] (13分)

请解释李工提出的动态冗余和N版本程序设计技术，给出图1中模块M2采用图2动态冗余技术后的可靠度。
请给出采用李工设计方案后整个系统可靠度的计算方法，并计算结果。

动态冗余又称为主动冗余，它是通过故障检测、故障定位及故障恢复等手段达到容错的目的。其主要方式是多重模块待机储备，当系统检测到某工作模块出现错误时，就用一个备用的模块来替代它并重新运行。各备用模块在其待机时，可与主模块一样工作，也可以不工作。前者叫冷备份系统(双工系统、双份系统)，后者叫热备份系统(双重系统)。

N版本程序设计是一种静态的故障屏蔽技术，其设计思想是用N个具有相同功能的程序同时执行项计算，结果通过多数表决来选择。其中N个版本的程序必须由不同的人独立设计，使用不同的方法、设计语言、开发环境和工具来实现，目的是减少N个版本的程序在表决点上相关错误的概率。

#### [问题3] (8分)

请给出检错技术的优缺点，并说明检测技术常见的实现方式和处理方式。

检错技术实现的代价一般低于容错技术和冗余技术，但有一个明显的缺点，就是不能自动解决故障，出现故障后如果不进行人工干预，将最终导致软件系统不能正常运行。
检错技术常见的实现方式：最直接的一种实现方式是判断返回结果，如果返回结果超出正常范围，则进行异常处理；计算运行时间也是一种常用技术，如果某个模块或函数运行时间超过预期时间，可以判断出现故障；还有置状态标志位等多种方法，自检的实现方式需要根据实际情况来选用。
检错技术的处理方式，大多数都采用“查处故障停止软件运行报警”的处理方式。但根据故障的不同情况，也有采用不停止或部分停止软件系统运行的情况，这一般由故障是否需要实时
处理来决定。

